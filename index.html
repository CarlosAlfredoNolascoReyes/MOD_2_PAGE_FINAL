<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="description" content="Explora cómo el ESP32 y IoT se integran en proyectos web y programación C++. Aprende a controlar dispositivos de forma remota." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> IoT, ESP32 y su aplicación con páginas web </title>
    <link rel="shortcut icon" href="./img/ICON.svg">
    <link rel="stylesheet" href="./stylesheet/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="script/script.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
</head>

<body>
    <div class="HEAD">
        <a href="#" class="HEAD_LINK">
            <img src="img/ICON.svg" alt="Icon" class="ICON_HEAD">
            <p class="HEAD_STYLE">TECNOLOGÍA Y MÁS</p>
        </a>
        <nav class="NAVBAR">
            <a href="#">
                <p class="NAVAR_STYLE"> EXTRAS </p>
            </a>
            <a href="#">
                <p class="NAVAR_STYLE"> DESCARGABLES </p>
            </a>
        </nav>
    </div>

    <div class="ICON_FIXED" onclick="SCROLL_TO_TOP()">
        <img src="img/ICON.svg" alt="Icon" class="ICON_BUTT">
    </div>

    <header class="CONTENT_HEADER">
        <h2>ESP32 y la tecnología IoT</h2>
    </header>

    <div class="IMAGE_CONTAINER">
        <img src="./img/IMAGE_2.jpg" alt="Decoracion" class="CENTER_IMAGE" width="1000px">
    </div>
    
    <div class="TEXT">
    <h2  class="TAB"> ¿Qué es la tecnología IoT? </h2>

    <P>
        El Internet de las Cosas (IoT, por sus siglas en inglés) es una red de dispositivos físicos conectados entre sí
        y a Internet, capaces de recopilar y compartir datos. Estos dispositivos pueden ser cualquier cosa, desde
        electrodomésticos inteligentes y dispositivos portátiles hasta sensores industriales y vehículos conectados. La
        idea principal es permitir que estos dispositivos se comuniquen y cooperen entre sí sin intervención humana
        directa.
    </P>

    <p>
        Algunos de los elementos mas importantes del IoT incluyen:
    <ul>
        <li>
            <strong> Sensores y Actuadores: </strong>
            Estos son los "ojos" y "manos" de los dispositivos IoT, permitiéndoles percibir su entorno y actuar en
            consecuencia.
        </li>
        <li>
            <strong> Conectividad: </strong>
            Los dispositivos IoT se conectan a Internet y entre sí a través de diversas tecnologías de comunicación,
            como Wi-Fi, Bluetooth, y redes celulares.
        </li>
        <li>
            <strong> Procesamiento de Datos: </strong>
            Los datos recopilados por los dispositivos IoT se analizan y procesan para obtener información útil. Esto
            puede ocurrir en el propio dispositivo (procesamiento en el borde) o en la nube.
        </li>
        <li>
            <strong> Interacción y Automatización: </strong>
            Los dispositivos IoT pueden interactuar entre sí y con sistemas más grandes, permitiendo la automatización
            de tareas y procesos.
        </li>
    </ul>
        <p>
            Algunas de las aplicaciones más destacables son: Hogares inteligentes, salud, industria, transporte y logistica,
            entre otros. El IoT tiene el potencial de transformar muchos aspectos de nuestra vida diaria, haciéndolos más
            eficientes, seguros y convenientes.
        </p>
    </p>

    <h2> Conociendo el ESP32 </h2>
    <h3> ¿Qué es ESP32 exactamente? </h3>
    <p>
        El ESP32 es un microcontrolador avanzado desarrollado por Espressif Systems. Es ampliamente utilizado en
        proyectos de IoT debido a su versatilidad, bajo costo y potencia. Las siguientes son un resumen de sus
        características más destacadas:

        <div class="IMAGE_CONTAINER">
            <img src="./img/IMAGE_3.PNG" alt="Decoracion" class="CENTER_IMAGE" width="500px">
        </div>
    <ul>
        <li>
            <strong> Procesador: </strong> Doble núcleo (dual-core) Tensilica Xtensa LX6, con una frecuencia de hasta
            240 MHz. También hay versiones con un solo núcleo.
        </li>
        <li>
            <strong> Memoria: </strong> 520 KB de SRAM, con opciones de expansión mediante memoria Flash externa.
        </li>
        <li>
            <strong> Conectividad: </strong> Integración de Wi-Fi 802.11 b/g/n y Bluetooth 4.2 (clásico y BLE) en un
            solo chip.
        </li>
        <li>
            <strong> Entradas y salidas: </strong> Cuenta con múltiples pines GPIO, ADCs (convertidores
            analógico-digital), DACs (convertidores digital-analógico), PWM (modulación por ancho de pulso), y más.
        </li>
        <li>
            <strong> Seguridad: </strong> Soporte para encriptación AES, RSA, SHA-2, y otros estándares de seguridad,
            así como un generador de números aleatorios y almacenamiento seguro.
        </li>
        <li>
            <strong> Bajo consumo de energía: </strong> Modos de ahorro de energía, como el modo de suspensión profunda,
            lo que lo hace ideal para aplicaciones de bajo consumo.
        </li>
    </ul>
        <p>
            El ESP32 es un componente fundamental en el desarrollo de dispositivos conectados debido a su capacidad de
            procesamiento, conectividad y flexibilidad. Esto lo convierte en una excelente opción para proyectos educativos y
            profesionales en el ámbito del IoT.
        </p>
    </p>

    <h3> Comparación con otros microcontroladores populares </h3>
    <div class="MICROCONTROLER_CONTAINER">
        <div class="MICROCONTROLER_CARD">
            <img src="./img/ESP32.jpg" alt="ESP32">
            <div class="MICROCONTROLER_INFO">
                <h4> ESP32 </h4>
                <p>
                    Ventajas: Wi-Fi y Bluetooth integrados, excelente rendimiento en IoT y control remoto.
                    <br> Características: Microcontrolador dual-core, 520 KB SRAM, conectividad inalámbrica, soporte para sensores y periféricos.
                    <br> Precio: $5-$15 USD.
                </p>
            </div>
        </div>
        <div class="MICROCONTROLER_CARD">
            <img src="./img/RASPBERRY.jpg" alt="RASPBERRY">
            <div class="MICROCONTROLER_INFO">
                <h4> Raspberry </h4>
                <p>
                    Ventajas: Potencia de procesamiento, ejecuta sistemas operativos completos (Linux).
                    <br>Características: Procesador ARM, GPIO, USB, HDMI, Ethernet, ideal para proyectos avanzados y computación.
                    <br> Precio: $35-$100 USD (según el modelo).
                </p>
            </div>
        </div>
        <div class="MICROCONTROLER_CARD">
            <img src="./img/NANO.jpg" alt="NANO">
            <div class="MICROCONTROLER_INFO">
                <h4> Arduino Nano </h4>
                <p>
                    Ventajas: Simplicidad, bajo consumo de energía, ideal para proyectos básicos.
                    <br> Características: Microcontrolador ATmega328P, 32 KB de memoria Flash, 14 pines digitales, 6 analógicos.
                    <br> Precio: $10-$20 USD.
                </p>
            </div>
        </div>
    </div>
    
    <p>
        El ESP32 a diferencia de otros microcontroladores (como Arduino, raspberry, entre otros), suele ser una
        excelente opción para implementar su uso con IoT. El ESP32 cuenta con conectividad a WiFi y Bluetooth sin
        necesidad de modulos externos, es mucho fácil de programar y generalmente tiene un costo más reducido.
    </p>

    <h2> Configuración del ESP32 </h2>
    <h3> Instalación y configuración del entorno de programación </h3>
    <p>
        El ESP32 puede programarse de una gran variedad de formas y lenguajes, pero para este caso, utilizaremos la
        herramienta de Arduino IDE y el lenguaje C++. Es una plataforma diseñada principalmente para microcontroladores
        Arduino, pero se puede configurar para programar el ESP32.
        Primero debemos dirigirnos a su pagina web y seguir los pasos para descargar el programa acorde a nuestras
        necesidades.
        <br>
        Una vez instalado el programa, su interfaz debería verse más o menos de esta manera:
        <div class="IMAGE_CONTAINER">
            <img src="./img/ARD_IDE_1.png" alt="Demostracion" class="CENTER_IMAGE" width="1000px">
        </div>
        Para poder cargar codigo en el microcontrolador código necesitaremos agregar la placa al entorno de desarrollo,
        para eso, en la barra lateral izquierda seleccionamos la opcion "Gestor de placas" y en buscar colocamos "ESP32"
        y descargamos el siguiente:
        <div class="IMAGE_CONTAINER">
            <img src="./img/ARD_IDE_2.png" alt="Demostracion" class="CENTER_IMAGE" width="500px">
        </div>
    </p>

    <h3> Empezar a programar </h3>
    <p>
        Habiendo realizado los pasos anteriores, podemos empezar a subir código en la placa, probemos lo siguiente:

    <div class="CODE_CONTAINER">
        <button class="COPY_BUTT" onclick="copyCode(this)">Copiar código</button>
       <pre><code class="language-c">
        #define LED 2 // La placa tiene un led por defecto en el pin 2
                
        void setup() {
            pinMode(LED, OUTPUT); // Declaramos el pin 2 como pin de salida
        }
                
        void loop() {
            digitalWrite(LED, HIGH); // Prendemos el led
            delay(1000);             // Esperamos 1 segundo
            digitalWrite(LED, LOW);  // Apagamos el led
            delay(500);              // Esperamos 1/2 segundo
        }
            </code></pre>
    </div>

        <p>
            Para subir codigo, seleccionamos la pestaña de la barra superior "Seleccionar Placa y Puerto", en "Buscar placa"
            escribimos "ESP32-WROOM-DA-Module" en puertos, hacemos clic en el que termine con "(USB)", le damos en aceptar y
            subimos el código con el boton de "Cargar", ubicada en la misma barra de acciones. <br>
            <div class="IMAGE_CONTAINER">
                <img src="./img/ARD_IDE_3.png" alt="Demostracion" class="CENTER_IMAGE" width="1000px">
            </div>
            Nota: En caso de que no aparezca el puerto USB, será necesario instalar un driver adicional a la computadora. El
            nombre del driver es "Silicon labs CP210x USB to UART Bridge".
        </p>
    </p>

    <h3> Conectando el ESP32 al internet </h3>
    <p>
        Una forma sencilla de conectar nuestra placa a internet es a través de librería, en este caso usaremos la
        librería de WiFi.h, la librería la podemos descargar desde github, el primer resultado que salga, para
        incluirla, nos vamos a la pestaña de "Scketch > Incluir biblioteca > Añadir biblioteca .ZIP" y seleccionar la
        carpeta que acabamos de descargar.
        <!-- Insertar imagen -->
        Ahora bien, el código sería de la siuiente manera:

        <div class="CODE_CONTAINER">
        <button class="COPY_BUTT" onclick="copyCode(this)">Copiar código</button>
        <pre><code class="language-c">
        # include &lt;WiFi.h&gt; // Incluimos el uso de la librería en nuestro codigo
        WiFiServer server(80); // Habilitamos el puerto 
        
        const *char SSID = "NOM" // Reemplazamos "NOM" por el nombre de nuestra red WiFi
        const *char PASSWORD = "CONT" // Reemplazamos "CONT" por la contraseña de nuestra red WiFi
        
        void setup () {
            Serial.begin (9600); // Habilitamos la comunicación serial
            WiFi.begin (SSID, PASSWORD); // Nos conectamos a la red WiFi
                
            Serial.println (); // Salto de linea 
        
            Serial.print ("Estableciondo conexión con: "); // Impresiones en el monitor serie
            Serial.print (SSID);
        
            while (WiFi.status() != WL_CONNECTED) {
            delay(500);
            Serial.printlnv ("CONECTANDO A RED WIFI...");
            }
        
            Serial.println ("CONEXION EXITOSA");
            Serial.println ();
        
            Serial.print ("IP ADRESS:   ");
            Serial.println (WiFi.localIP()); // Dirección IP que toma la placa en la red
                
            server.begin ();
        }
        
        void loop () {
            WiFiClient client = server.available();
            if (client) {
                Serial.println("CLIENTE CONECTADO");
                delay (10);
                client.stop ();
            }
        }
            </code></pre>
    </div>
        <p>
            De esta manera ya tenemos conectado la placa a internet, y para ver las impresiones seriales que hace la placa, nos
            dirigimos a la esquita superor derecha y seleccionamos "Monitor Serie", pero... ¿Como podemos empezar a monitorear
            nuestros dispositivos?.
            Si bien, existen una gran cantidad de librerias que nos permiten realizar estos trabajos, haremos este trabajo desde
            cero con HTML.
        </p>
    </p>

    <h3> Controlando un LED con el teclado a travéz de una pagina web </h3>
    <p>
        Reutilizaremos el código anterior, agregando unas cuantas cosas mas.

        <div class="CODE_CONTAINER">
        <button class="COPY_BUTT" onclick="copyCode(this)">Copiar código</button>
        <pre><code class="language-c">
        # include &lt;WiFi.h&gt;
        WiFiServer server(80);
                
        const char* SSID = "NOM";
        const char* PASSWORD = "CONT";
                
        # define LEDPIN 2
                
        void setup () {
            Serial.begin (9600);
            delay (10);
            pinMode (LEDPIN, OUTPUT);
                
            WiFi.begin (SSID, PASSWORD);
                
            Serial.println ();
            Serial.println ();
                
            Serial.print("ESTABLECIENDO CONEXION CON:    ");
            Serial.println(SSID);
                
            while (WiFi.status() != WL_CONNECTED) {
                delay(1000);
                Serial.println("CONECTANDO A RED WIFI...");
            }
                
            Serial.println("CONEXION EXITOSA");
            Serial.println();
            Serial.print("IP ADRESS:   ");
            Serial.println(WiFi.localIP()); // IMPORTANTE GUARDAR ESTE DATO
                
            server.begin();
        }
                
        void loop () {
            WiFiClient client = server.available();
            if (client) {
                Serial.println("CLIENTE CONECTADO");
                String request = client.readStringUntil('\r');
                client.flush();
                
                if (request.indexOf ("/ENCENDER_LED") != -1) {
                    digitalWrite (LEDPIN, HIGH);
                    delay (10);
                }
                if (request.indexOf ("/APAGAR_LED") != -1) {
                    digitalWrite (LEDPIN, LOW);
                    delay (10);
                }
                
                String html = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n";
                
                client.print (html);
                delay (10);
                client.stop ();
            }
        }
        </code></pre>
    </div>
        <p>
            Con esta parte del código tenemos lista la placa, ahora solo falta la programación de la pagina web.
        </p>

        <div class="CODE_CONTAINER">
        <button class="COPY_BUTT" onclick="copyCode(this)">Copiar código</button>
        <pre><code class="language-c">
        &lt;!DOCTYPE html&gt;
        &lt;html&gt;
        &lt;head&gt; &lt;title&gt; CONTROL_LED &lt;/title&gt; &lt;/head&gt;
        &lt;body&gt;
            &lt;h1&gt; CONTROL DE LED &lt;/h1&gt;
                    
            &lt;button id="BOTON_DE_ENCENDIDO"&gt; ENCENDER LED &lt;/button&gt;
            &lt;button id="BOTON_DE_APAGADO"&gt; APAGAR LED &lt;/button&gt;
            
            &lt;script&gt;
                let ISKEYPRESED = false;
            
                function EncenderLed () {
                    fetch ('http://192.168.0.25/ENCENDER_LED')      //"ENCENDER_LED" es la variable que lee el ESP32 para prender el led
                        .then (response =&gt; console.log ('LED ENCENDIDO'))
                        .catch (error =&gt; console.error ('Error:', error));
                }
                function ApagarLed() {
                    fetch('http://192.168.0.25/APAGAR_LED')     //En "DIRECCION_IP" agregas el ip proporcionado en el codigo C++
                        .then(response =&gt; console.log('LED APAGADO'))
                        .catch(error =&gt; console.error('Error:', error));
                    }
            
                //Con esta funcion el led se prende por tiempo indefinido hasta presionar la tecla w
                document.addEventListener ('keydown', function (event) {
                    if (event.key === 'q' || event.key === 'Q') {
                        EncenderLed ();
                        event.preventDefault ();
                    }
                    else if (event.key === 'w' || event.key === 'W') {
                        ApagarLed ();
                        event.preventDefault ();
                    }
                }); 
            
                //Con esta funcion el led se prende mientras este presionada la tecla E
                document.addEventListener ('keydown', function (event) {
                    if (event.key === 'e' || event.key === 'E') {
                        if (!ISKEYPRESED) {
                            EncenderLed ();
                            ISKEYPRESED = true;
                        }
                    }
                });
                        
                //En caso contrario, el led se apaga
                document.addEventListener('keyup', function (event) {
                    if (event.key === 'e' || event.key === 'E') {
                        ApagarLed ();
                        ISKEYPRESED = false;
                        event.preventDefault ();
                    }
                });
            
                //Se le da la propiedad de poder hacer clic en los botones previamente creados
                document.getElementById('BOTON_DE_ENCENDIDO').addEventListener('click', EncenderLed);
                document.getElementById('BOTON_DE_APAGADO').addEventListener('click', ApagarLed);
            &lt;/script&gt;
        &lt;/body&gt;
    &lt;/html&gt;
        </code></pre>
    </div>
        <p>
            Aunque la página será bastante simple, podemos empezar a probar diversas posibilidades tanto en el ESP32 así como en
            la página, desde candados electrónicos", luces automaticas, muestras visuales de los datos monitoreados, reigo de
            plantas automatico, entre muchas más. El límite esta en tu imaginación.
        </p>
    </p>
    </div>
    <div class="FOOTER">
        <p> 2024 Carlos N. Reyes. Todos los derechos reservados. </p>
    </div>
</body>
</html>